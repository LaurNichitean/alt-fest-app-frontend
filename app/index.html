<!DOCTYPE html>
<html lang="en">
<head>
  <title>Alt Festival - Favorite Songs App</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"/>

  <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic'>
  <link rel="stylesheet" href="./bower_components/angular-material/angular-material.css"/>
  <link rel="stylesheet" href="assets/app.css"/>

  <style type="text/css">
    /**
     * Hide when Angular is not yet loaded and initialized
     */
    [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
      display: none !important;
    }
  </style>

</head>

<body ng-app="altFest" layout="row" ng-controller="ArtistCtrl as ac" ng-cloak>

<md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2"
            md-component-id="left"
            md-is-locked-open="$mdMedia('gt-sm')"
            layout-align="start center">

  <md-toolbar class="md-whiteframe-z1">
    <h1>Artists</h1>
  </md-toolbar>

  <md-list-item ng-repeat="artist in artists">
    <md-button ng-click="selectArtist(artist)" ng-class="{'selected' : artist === selectedArtist }">
      {{artist.name}}
    </md-button>
    <md-button class="md-fab md-mini deleteArtist" ng-click="deleteArtist(artist, $index)">
      <md-tooltip md-direction="right">Delete artist</md-tooltip>
      -
    </md-button>
  </md-list-item>
  <!-- add artist button -->
  <md-button class="md-primary md-fab md-mini add-button" ng-click="toggleAddArtist()">
    <md-tooltip>
      Add artist
    </md-tooltip>
    <span ng-if="!addArtistInputVisible">+</span>
    <span ng-if="addArtistInputVisible">-</span>
  </md-button>

  <div ng-if="addArtistInputVisible">
    <md-input-container>
      <label>Artist name</label>
      <input type="text" ng-model="artistToAdd.name"/>
    </md-input-container>
    <md-button ng-click="addArtist()" ng-disabled="!artistToAdd.name.length">Add</md-button>
    <md-button ng-click="toggleAddArtist()">Cancel</md-button>
  </div>


  </md-list>

</md-sidenav>


<div flex layout="column" tabIndex="-1" role="main" class="md-whiteframe-z2">

  <md-toolbar layout="row" class="md-whiteframe-z1">
    <md-button class="menu" hide-gt-sm ng-click="toggleSideNav()" aria-label="Show Artists List">
      <md-icon md-svg-icon="menu"></md-icon>
    </md-button>
    <h1>Alt Festival - Favorite Songs App</h1>
  </md-toolbar>

  <md-content flex id="content">
    <h2 style="padding-bottom: 15px">{{selectedArtist.name}}
      <!-- add song button -->
      <md-button class="md-primary md-fab md-mini add-button" ng-click="toggleAddSong()" ng-if="selectedArtist.name">
        <md-tooltip>
          Add song
        </md-tooltip>
        <span ng-if="!addSongInputVisible">
          +
        </span>
        <span ng-if="addSongInputVisible">
          -
        </span>
      </md-button>
    </h2>
    <!-- Add song -->
    <div class="add-song-container" ng-if="addSongInputVisible">
      <md-content>
        <md-input-container>
          <label>Song name</label>
          <input type="text" ng-model="songToAdd.name"/>
        </md-input-container>
        <md-input-container>
          <label>Youtube URL</label>
          <input type="text" ng-model="songToAdd.urlYoutube"/>
        </md-input-container>
        <md-button ng-click="saveSong()">Save</md-button>
        <md-button ng-click="addSongInputVisible = false">Cancel</md-button>
      </md-content>
    </div>
    <!-- /Add song -->

    <!-- Here we will load content from 'Songs' controller -->
    <md-card ng-repeat="song in selectedArtist.songs track by $index">
      <iframe width="100%" height="480" ng-src="{{song.urlYoutube}}" frameborder="0"></iframe>
      <md-card-content>
        <h2 class="md-title">{{song.name}}</h2>

        <p>Likes: {{song.likes}}</p>
      </md-card-content>
      <div class="md-actions" layout="row" layout-align="end center">
        <md-button ng-click="addVote(song, 1)">Like this song!</md-button>
        <md-button ng-click="addVote(song, -1)">Dislike this song!</md-button>
        <md-button class="md-raised md-warn" ng-click="deleteSong(song, $index)">Delete</md-button>
      </div>
    </md-card>
  </md-content>

</div>

<script src="./bower_components/angular/angular.js"></script>
<script src="./bower_components/angular-animate/angular-animate.js"></script>
<script src="./bower_components/angular-aria/angular-aria.js"></script>
<script src="./bower_components/angular-resource/angular-resource.js"></script>
<script type="text/javascript" src="./bower_components/angular-material/angular-material.js"></script>

<script src="./src/app.js"></script>
<script src="./src/artists/artist-ctrl.js"></script>
<script src="./src/artists/artist-service.js"></script>
<script src="./src/songs/song-service.js"></script>

</body>
</html>
